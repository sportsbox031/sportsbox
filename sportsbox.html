<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>스포츠박스 예약</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FullCalendar 최신 버전 -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>

    <style>
        .fc-day-today {
            background-color: rgba(229, 231, 235, 0.3) !important;
        }
        .fc-day.fc-day-sat, .fc-day.fc-day-sun {
            background-color: #f3f4f6 !important;
        }
        .reservation-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin: 2px auto;
        }
        .status-available { background-color: #10B981; }
        .status-closed { background-color: #EF4444; }
        .status-pending { background-color: #FCD34D; }

        .time-select {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
            width: 100%;
        }

        .auth-section {
            display: none;
        }

        .auth-section.active {
            display: block;
        }

        .fc-daygrid-day.fc-day-sat, .fc-daygrid-day.fc-day-sun {
            background-color: #f3f4f6 !important;
        }
    </style>

    <script>
        // 전역 변수 선언
        let users = JSON.parse(localStorage.getItem('users')) || {};
        
        // 관리자 계정이 없으면 생성
        if (!users.admin) {
            users.admin = {
                password: 'admin123',
                groupName: '관리자',
                isAdmin: true,
                isApproved: true
            };
            localStorage.setItem('users', JSON.stringify(users));
        }

        let currentUser = null;
        let calendar = null;
        let adminCalendar = null;
        let reservations = JSON.parse(localStorage.getItem('reservations')) || {};
        function generateTimeOptions() {
            const times = [];
            for (let hour = 9; hour < 17; hour++) {
                for (let minute = 0; minute < 60; minute += 10) {
                    const formattedHour = hour.toString().padStart(2, '0');
                    const formattedMinute = minute.toString().padStart(2, '0');
                    times.push(`${formattedHour}:${formattedMinute}`);
                }
            }
            return times;
        }

        // 회원가입 함수
        function register() {
            const username = document.getElementById('register-username').value;
            const password = document.getElementById('register-password').value;
            const groupName = document.getElementById('register-groupname').value;

            if (!username || !password || !groupName) {
                alert('모든 정보를 입력해주세요.');
                return;
            }

            if (users[username]) {
                alert('이미 존재하는 아이디입니다.');
                return;
            }

            users[username] = {
                password,
                groupName,
                isAdmin: false,
                isApproved: false  // 승인 대기 상태로 설정
            };

            localStorage.setItem('users', JSON.stringify(users));
            alert('회원가입이 완료되었습니다. 관리자 승인 후 로그인이 가능합니다.');
            showLoginForm();
        }

        // 로그인 함수
        function login() {
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;

            if (!users[username] || users[username].password !== password) {
                alert('아이디 또는 비밀번호가 올바르지 않습니다.');
                return;
            }

            if (!users[username].isAdmin && !users[username].isApproved) {
                alert('관리자 승인 대기 중입니다. 승인 후 로그인이 가능합니다.');
                return;
            }

            currentUser = {
                username,
                groupName: users[username].groupName,
                isAdmin: users[username].isAdmin
            };

            document.getElementById('auth-container').style.display = 'none';

            if (currentUser.isAdmin) {
                // 관리자 로그인
                document.getElementById('admin-container').style.display = 'block';
                document.getElementById('main-container').style.display = 'none';
                showAdminCalendar();
                updateAllReservations();
                updateUserApprovals();
            } else {
                // 일반 사용자 로그인
                document.getElementById('admin-container').style.display = 'none';
                document.getElementById('main-container').style.display = 'block';
                document.getElementById('current-user').textContent = currentUser.groupName;
                
                // 달력 초기화 및 렌더링
                if (!calendar) {
                    initializeUserCalendar();
                }
                calendar.render();
                
                // 예약 현황 업데이트
                updateMyReservations();
            }
        }

        // 로그아웃 함수
        function logout() {
            currentUser = null;
            document.getElementById('auth-container').style.display = 'block';
            document.getElementById('admin-container').style.display = 'none';
            document.getElementById('main-container').style.display = 'none';
            // 로그인 폼 초기화
            document.getElementById('login-username').value = '';
            document.getElementById('login-password').value = '';
        }
        // 일반 사용자용 달력 초기화
        function initializeUserCalendar() {
            const calendarEl = document.getElementById('calendar');
            if (!calendarEl) return;

            calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                initialDate: '2025-02-01',
                height: 'auto',
                headerToolbar: {
                    left: '',
                    center: 'title',
                    right: ''
                },
                validRange: {
                    start: '2025-02-01',
                    end: '2025-03-01'
                },
                dateClick: function(info) {
                    if (!currentUser) {
                        alert('로그인이 필요합니다.');
                        return;
                    }

                    const day = info.date.getDay();
                    if (day === 0 || day === 6) {
                        alert('주말은 예약이 불가능합니다.');
                        return;
                    }

                    const userReservations = Object.values(reservations)
                        .flat()
                        .filter(r => r.username === currentUser.username && r.status !== 'rejected');
                    if (userReservations.length >= 4) {
                        alert('최대 4일까지만 예약 가능합니다.');
                        return;
                    }

                    showReservationPopup(info.dateStr);
                },
                dayCellDidMount: function(info) {
                    const dateStr = info.date.toISOString().split('T')[0];
                    updateDateStatus(dateStr);
                }
            });
        }

        // 폼 전환 함수들
        function showRegisterForm() {
            document.getElementById('login-section').classList.remove('active');
            document.getElementById('register-section').classList.add('active');
        }

        function showLoginForm() {
            document.getElementById('register-section').classList.remove('active');
            document.getElementById('login-section').classList.add('active');
        }

        // 관리자용 달력 표시
        function showAdminCalendar() {
            const adminCalendarEl = document.getElementById('admin-calendar');
            if (!adminCalendarEl) return;

            adminCalendar = new FullCalendar.Calendar(adminCalendarEl, {
                initialView: 'dayGridMonth',
                initialDate: '2025-02-01',
                height: 'auto',
                headerToolbar: {
                    left: '',
                    center: 'title',
                    right: ''
                },
                validRange: {
                    start: '2025-02-01',
                    end: '2025-03-01'
                },
                dateClick: function(info) {
                    showDateReservations(info.dateStr);
                },
                dayCellDidMount: function(info) {
                    const dateStr = info.date.toISOString().split('T')[0];
                    updateAdminDateStatus(dateStr);
                }
            });
            
            adminCalendar.render();
        }
        function updateDateStatus(dateStr) {
            const status = getDateStatus(dateStr);
            const dayEl = calendar.el.querySelector(`[data-date="${dateStr}"]`);
            if (dayEl) {
                const existingDot = dayEl.querySelector('.reservation-status');
                if (existingDot) {
                    existingDot.remove();
                }
                const dot = document.createElement('div');
                dot.className = `reservation-status status-${status}`;
                dayEl.querySelector('.fc-daygrid-day-top').appendChild(dot);
            }
        }

        function updateAdminDateStatus(dateStr) {
            if (!reservations[dateStr]) return;
            
            const dayEl = adminCalendar.el.querySelector(`[data-date="${dateStr}"]`);
            if (dayEl) {
                const existingDot = dayEl.querySelector('.reservation-status');
                if (existingDot) {
                    existingDot.remove();
                }
                const dot = document.createElement('div');
                dot.className = 'reservation-status status-pending';
                dayEl.querySelector('.fc-daygrid-day-top').appendChild(dot);
            }
        }

        function getDateStatus(date) {
            const dateObj = new Date(date);
            const day = dateObj.getDay();
            
            // 토요일(6)이나 일요일(0)인 경우
            if (day === 0 || day === 6) {
                return 'closed';
            }
            
            if (!reservations[date]) return 'available';
            // 신청이 2개 이상이면 마감
            return reservations[date].length >= 2 ? 'closed' : 'available';
        }

        function showDateReservations(date) {
            const dateReservations = reservations[date] || [];
            const popup = document.createElement('div');
            popup.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            
            let reservationsHtml = dateReservations.map(r => `
                <div class="bg-white p-4 rounded-lg shadow mb-4">
                    <p><strong>단체명:</strong> ${r.groupName}</p>
                    <p><strong>시간:</strong> ${r.startTime} - ${r.endTime}</p>
                    <p><strong>인원:</strong> ${r.peopleCount}명</p>
                    <p><strong>연락처:</strong> ${r.contact}</p>
                    <p><strong>상태:</strong> ${getStatusText(r.status)}</p>
                    ${r.status === 'waiting' ? `
                        <div class="flex justify-end gap-2 mt-2">
                            <button onclick="handleReservation('${date}', '${r.username}', 'approved')" 
                                class="px-3 py-1 bg-green-500 text-white rounded">승인</button>
                            <button onclick="handleReservation('${date}', '${r.username}', 'rejected')" 
                                class="px-3 py-1 bg-red-500 text-white rounded">거부</button>
                        </div>
                    ` : ''}
                </div>
            `).join('');

            if (dateReservations.length === 0) {
                reservationsHtml = '<p class="text-gray-500">예약 내역이 없습니다.</p>';
            }

            popup.innerHTML = `
                <div class="bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4">
                    <h2 class="text-xl font-bold mb-4">${date} 예약 현황</h2>
                    <div class="max-h-96 overflow-y-auto">
                        ${reservationsHtml}
                    </div>
                    <div class="flex justify-end mt-4">
                        <button onclick="closePopup()" class="px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300">
                            닫기
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(popup);
        }
        function showReservationPopup(date) {
            if (reservations[date] && reservations[date].length >= 2) {
                alert('마감된 날짜입니다.');
                return;
            }

            const timeOptions = generateTimeOptions();
            const popup = document.createElement('div');
            popup.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            popup.innerHTML = `
                <div class="bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4">
                    <h2 class="text-xl font-bold mb-4">예약 신청 (${date})</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">시작 시간</label>
                            <select id="start-time" class="time-select">
                                ${timeOptions.map(time => `<option value="${time}">${time}</option>`).join('')}
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">종료 시간</label>
                            <select id="end-time" class="time-select">
                                ${timeOptions.map(time => `<option value="${time}">${time}</option>`).join('')}
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">인원</label>
                            <input type="number" id="people-count" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">연락처</label>
                            <input type="tel" id="contact" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2">
                        </div>
                        <div class="flex justify-end space-x-2 mt-6">
                            <button onclick="closePopup()" class="px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300">취소</button>
                            <button onclick="submitReservation('${date}')" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">예약하기</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(popup);
        }

        function closePopup() {
            const popup = document.querySelector('.fixed');
            if (popup) popup.remove();
        }

        function submitReservation(date) {
            const startTime = document.getElementById('start-time').value;
            const endTime = document.getElementById('end-time').value;
            const peopleCount = document.getElementById('people-count').value;
            const contact = document.getElementById('contact').value;

            if (!startTime || !endTime || !peopleCount || !contact) {
                alert('모든 정보를 입력해주세요.');
                return;
            }

            if (startTime >= endTime) {
                alert('종료 시간은 시작 시간보다 늦어야 합니다.');
                return;
            }

            // 예약 가능 여부 재확인
            if (!reservations[date]) {
                reservations[date] = [];
            }
            
            // 이미 2개 이상의 신청이 있는 경우
            if (reservations[date].length >= 2) {
                alert('마감된 날짜입니다.');
                return;
            }

            const newReservation = {
                date,
                username: currentUser.username,
                groupName: currentUser.groupName,
                startTime,
                endTime,
                peopleCount,
                contact,
                status: 'waiting'
            };

            reservations[date].push(newReservation);
            localStorage.setItem('reservations', JSON.stringify(reservations));

            updateDateStatus(date);
            if (adminCalendar) {
                updateAdminDateStatus(date);
            }
            closePopup();
            updateMyReservations();
            alert('예약이 신청되었습니다.');
        }
        function handleReservation(date, username, status) {
            const reservation = reservations[date].find(r => r.username === username);
            if (reservation) {
                reservation.status = status;
                
                if (status === 'rejected') {
                    reservations[date] = reservations[date].filter(r => r !== reservation);
                    if (reservations[date].length === 0) {
                        delete reservations[date];
                    }
                }

                localStorage.setItem('reservations', JSON.stringify(reservations));
                
                updateDateStatus(date);
                updateAdminDateStatus(date);
                closePopup();
                
                // 승인/거부 알림 추가
                alert(status === 'approved' ? '승인되었습니다.' : '거부되었습니다.');
                
                showDateReservations(date);
                updateAllReservations();
            }
        }

        function updateMyReservations() {
            const container = document.getElementById('my-reservations');
            if (!container) return;

            container.innerHTML = '<h3 class="text-xl font-bold mb-4">나의 신청 현황</h3>';

            const userReservations = Object.values(reservations)
                .flat()
                .filter(r => r.username === currentUser.username);

            if (userReservations.length === 0) {
                container.innerHTML += '<p class="text-gray-500">신청 내역이 없습니다.</p>';
                return;
            }

            const table = document.createElement('table');
            table.className = 'min-w-full divide-y divide-gray-200';
            table.innerHTML = `
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">날짜</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">시간</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">인원</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">상태</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    ${userReservations.map(reservation => `
                        <tr>
                            <td class="px-6 py-4">${reservation.date}</td>
                            <td class="px-6 py-4">${reservation.startTime} - ${reservation.endTime}</td>
                            <td class="px-6 py-4">${reservation.peopleCount}명</td>
                            <td class="px-6 py-4">${getStatusText(reservation.status)}</td>
                        </tr>
                    `).join('')}
                </tbody>
            `;
            container.appendChild(table);
        }
        function updateAllReservations() {
            const container = document.getElementById('all-reservations');
            if (!container) return;

            const allReservations = Object.entries(reservations).map(([date, reservs]) => {
                return reservs.map(r => ({...r, date}));
            }).flat();

            if (allReservations.length === 0) {
                container.innerHTML = '<p class="text-gray-500">예약 내역이 없습니다.</p>';
                return;
            }

            const table = document.createElement('table');
            table.className = 'min-w-full divide-y divide-gray-200';
            table.innerHTML = `
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">날짜</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">단체명</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">시간</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">인원</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">연락처</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">상태</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">관리</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    ${allReservations.map(r => `
                        <tr>
                            <td class="px-6 py-4">${r.date}</td>
                            <td class="px-6 py-4">${r.groupName}</td>
                            <td class="px-6 py-4">${r.startTime} - ${r.endTime}</td>
                            <td class="px-6 py-4">${r.peopleCount}명</td>
                            <td class="px-6 py-4">${r.contact}</td>
                            <td class="px-6 py-4">${getStatusText(r.status)}</td>
                            <td class="px-6 py-4">
                                ${r.status === 'waiting' ? `
                                    <button onclick="handleReservation('${r.date}', '${r.username}', 'approved')" 
                                        class="px-3 py-1 bg-green-500 text-white rounded mr-2">승인</button>
                                    <button onclick="handleReservation('${r.date}', '${r.username}', 'rejected')" 
                                        class="px-3 py-1 bg-red-500 text-white rounded">거부</button>
                                ` : ''}
                            </td>
                        </tr>
                    `).join('')}
                </tbody>
            `;
            container.innerHTML = '';
            container.appendChild(table);
        }

        function getStatusText(status) {
            const statusMap = {
                'waiting': '승인대기',
                'approved': '승인완료',
                'rejected': '거부됨',
                'closed': '마감'
            };
            return statusMap[status] || status;
        }

        // 회원 승인 현황 업데이트
        function updateUserApprovals() {
            const container = document.getElementById('user-approvals');
            if (!container) return;

            const pendingUsers = Object.entries(users)
                .filter(([username, user]) => !user.isAdmin && !user.isApproved)
                .map(([username, user]) => ({username, ...user}));

            if (pendingUsers.length === 0) {
                container.innerHTML = '<p class="text-gray-500">승인 대기 중인 회원이 없습니다.</p>';
                return;
            }

            const table = document.createElement('table');
            table.className = 'min-w-full divide-y divide-gray-200';
            table.innerHTML = `
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">아이디</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">단체명</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">관리</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    ${pendingUsers.map(user => `
                        <tr>
                            <td class="px-6 py-4">${user.username}</td>
                            <td class="px-6 py-4">${user.groupName}</td>
                            <td class="px-6 py-4">
                                <button onclick="approveUser('${user.username}')" 
                                    class="px-3 py-1 bg-green-500 text-white rounded mr-2">승인</button>
                                <button onclick="rejectUser('${user.username}')" 
                                    class="px-3 py-1 bg-red-500 text-white rounded">거부</button>
                            </td>
                        </tr>
                    `).join('')}
                </tbody>
            `;
            container.innerHTML = '';
            container.appendChild(table);
        }

        // 회원 승인 처리
        function approveUser(username) {
            users[username].isApproved = true;
            localStorage.setItem('users', JSON.stringify(users));
            alert('회원이 승인되었습니다.');
            updateUserApprovals();
        }

        // 회원 거부 처리
        function rejectUser(username) {
            delete users[username];
            localStorage.setItem('users', JSON.stringify(users));
            alert('회원이 거부되었습니다.');
            updateUserApprovals();
        }

        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', function() {
            // 초기에는 달력 숨기기
            document.getElementById('main-container').style.display = 'none';
            document.getElementById('admin-container').style.display = 'none';
        });
    </script>
</head>
<body>
    <!-- 인증 컨테이너 -->
    <div id="auth-container" class="min-h-screen bg-gradient-to-r from-blue-500 to-green-400 p-8">
        <div class="max-w-md mx-auto">
            <!-- 로그인 섹션 -->
            <div id="login-section" class="auth-section active bg-white rounded-xl shadow-xl p-6">
                <h2 class="text-2xl font-bold text-center mb-6">로그인</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">아이디</label>
                        <input type="text" id="login-username" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">비밀번호</label>
                        <input type="password" id="login-password" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2">
                    </div>
                    <button onclick="login()" class="w-full bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600">
                        로그인
                    </button>
                    <div class="text-center">
                        <button onclick="showRegisterForm()" class="text-blue-500 hover:text-blue-700">
                            회원가입
                        </button>
                    </div>
                </div>
            </div>

            <!-- 회원가입 섹션 -->
            <div id="register-section" class="auth-section bg-white rounded-xl shadow-xl p-6">
                <h2 class="text-2xl font-bold text-center mb-6">회원가입</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">아이디</label>
                        <input type="text" id="register-username" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">비밀번호</label>
                        <input type="password" id="register-password" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">단체명</label>
                        <input type="text" id="register-groupname" class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2">
                    </div>
                    <button onclick="register()" class="w-full bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600">
                        회원가입
                    </button>
                    <div class="text-center">
                        <button onclick="showLoginForm()" class="text-blue-500 hover:text-blue-700">
                            로그인으로 돌아가기
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 관리자 컨테이너 -->
    <div id="admin-container" class="bg-gradient-to-r from-blue-500 to-green-400 min-h-screen p-8" style="display: none;">
        <div class="bg-white rounded-xl shadow-xl p-6 max-w-4xl mx-auto">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-3xl font-bold">관리자 페이지</h1>
                <div class="text-right space-y-2">
                    <p class="text-gray-600">관리자 모드</p>
                    <button onclick="logout()" class="px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300">로그아웃</button>
                </div>
            </div>

            <!-- 회원 승인 관리 섹션 -->
            <div class="bg-gray-50 p-6 rounded-lg mb-8">
                <h3 class="text-xl font-bold mb-4">회원 승인 관리</h3>
                <div id="user-approvals" class="space-y-4">
                    <!-- 여기에 회원 승인 목록이 표시됩니다 -->
                </div>
            </div>

            <!-- 달력 상태 범례 -->
            <div class="flex justify-end gap-4 mb-4 text-sm">
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-yellow-400 rounded-full"></div>
                    <span>예약신청</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                    <span>승인완료</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                    <span>마감</span>
                </div>
            </div>

            <!-- 관리자용 달력 -->
            <div id="admin-calendar" class="mb-8"></div>

            <!-- 전체 예약 현황 -->
            <div class="bg-gray-50 p-6 rounded-lg">
                <h3 class="text-xl font-bold mb-4">전체 예약 현황</h3>
                <div id="all-reservations" class="space-y-4">
                    <!-- 여기에 전체 예약 현황이 표시됩니다 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 일반 사용자 컨테이너 -->
    <div id="main-container" class="bg-gradient-to-r from-blue-500 to-green-400 min-h-screen p-8">
        <div class="bg-white rounded-xl shadow-xl p-6 max-w-4xl mx-auto">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-3xl font-bold">스포츠박스 예약</h1>
                <div class="text-right space-y-2">
                    <p class="text-gray-600">로그인: <span id="current-user" class="font-semibold"></span></p>
                    <button onclick="logout()" class="px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300">로그아웃</button>
                </div>
            </div>

            <!-- 달력 상태 범례 -->
            <div class="flex justify-end gap-4 mb-4 text-sm">
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                    <span>예약가능</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                    <span>마감</span>
                </div>
            </div>

            <!-- 달력 컴포넌트 -->
            <div id="calendar" class="mb-8"></div>

            <!-- 나의 신청 현황 -->
            <div id="my-reservations" class="bg-gray-50 p-6 rounded-lg">
            </div>
        </div>
    </div>
</body>
</html>